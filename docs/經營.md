# 博客經營指南

本指南說明如何創建新文章、撰寫內容、上傳圖片，以及日常的維護流程。

**作者：** Wei-Ting Liu

## 📝 創建新文章

### 手動創建文章

1. **確定文章日期**：決定這篇文章的發佈日期（例如：2025年11月）

2. **創建目錄結構**：
   ```bash
   # 在項目根目錄下執行
   # 如果 2025/11 資料夾還不存在，先創建
   mkdir -p content/2025/11
   ```

3. **創建文章檔案**：
   在對應的年份/月份資料夾下創建 `.md` 檔案
   - 檔案位置：`content/2025/11/文章標題.md`
   - 檔名建議：使用有意義的中文或英文名稱，例如：`大一下第六週回顧.md` 或 `my-new-post.md`

4. **編輯文章**：
   打開檔案，加入 front matter 和內容：

   ```markdown
   ---
   title: "大一下第六週回顧"
   date: 2025-11-03
   tags:
     - "daily-notes"
     - "self-growth"
   categories:
     - "台大資管生活"
   coverImage: "https://img.waynspace.com/2025/11/my-post/cover.webp"  # 可選，封面圖片 URL
   author:
     name: Wei-Ting Liu
     email: wayntingliu@gmail.com
   ---

   這裡開始寫你的文章內容...

   ### 第一段標題

   文章內容...

   ![圖片說明](./photo1.jpg)  <!-- 使用相對路徑，腳本會自動處理 -->
   ```

### 注意事項

- 文章必須放在對應的年份/月份資料夾下（例如：`content/2025/11/`）
- 檔案名稱會自動成為 URL slug
- 如果需要在不同年份/月份之間移動文章，將檔案移動到對應目錄即可

## 🖼️ 添加圖片

### 推薦方式：使用自動處理腳本

1. **將圖片放在文章同目錄下**：
   ```bash
   content/2025/11/my-post/
   ├── my-post.md
   ├── photo1.jpg
   └── photo2.png
   ```

2. **在文章中使用相對路徑**：
   ```markdown
   ![圖片說明](./photo1.jpg)
   ![另一張圖](./photo2.png)
   ```

3. **執行自動處理腳本**：
   ```bash
   npm run images:process
   ```
   
   這個腳本會自動：
   - ✅ 轉換圖片為 WebP 格式
   - ✅ 壓縮圖片（節省空間）
   - ✅ 上傳到 R2
   - ✅ 替換文章中的路徑為 CDN URL
   - ✅ 刪除本地圖片（處理完成後）

4. **結果**：
   文章中的路徑會自動更新為：
   ```markdown
   ![圖片說明](https://img.waynspace.com/2025/11/my-post/photo1.webp)
   ```

**詳細說明請參考 `圖片上傳指南.md`**

---

## ✍️ 寫作規範

### Front Matter 欄位說明

```markdown
---
title: "文章標題"              # 必填：文章標題
date: 2025-11-03              # 必填：發佈日期（YYYY-MM-DD 格式）
tags:                          # 可選：標籤列表
  - "daily-notes"
  - "self-growth"
categories:                    # 必填：分類列表（第一個為主分類）
  - "台大資管生活"
coverImage: "完整URL或檔名"   # 可選：封面圖片 URL 或檔名
---
```

### 常用分類

**分類（categories）**：
- `台大資管生活` / `ntu-life` - 台大資管生活相關
- `科學班生活` / `science-class-journal` - 科學班生活相關
- `技術筆記` / `tech-notes` - 技術相關筆記
- `攝影筆記` / `photography-notes` - 攝影相關
- `城市漫步` / `city-walk` - 城市漫步相關
- `生活日誌` / `personal-journal` - 日常生活記錄
- `讀書筆記與心得` / `reading-notes` - 閱讀相關

**標籤（tags）**：
- `daily-notes` - 日常記錄
- `self-growth` - 自我成長
- `uni-life` - 大學生活
- `tech-memo` - 技術筆記
- `photography` - 攝影
- `life-philosophy` - 生活哲學

### Markdown 語法

本博客支援標準 Markdown 和 GitHub Flavored Markdown：

- **標題**：`# 一級標題`、`## 二級標題`
- **粗體**：`**粗體文字**`
- **斜體**：`*斜體文字*`
- **連結**：`[連結文字](https://example.com)`
- **圖片**：`![圖片說明](https://img.waynspace.com/2025/11/slug/image.webp)`
- **程式碼**：`` `inline code` `` 或程式碼區塊
- **列表**：`- 項目` 或 `1. 項目`
- **引用**：`> 引用文字`

## 🔄 日常發佈流程

### 1. 撰寫文章

在 `content/YYYY/MM/` 下創建並編輯 `.md` 檔案

### 2. 上傳圖片到 R2

**推薦方式：使用自動處理腳本**

1. **將圖片放在文章同目錄下**：
   ```bash
   content/2025/11/my-post/
   ├── my-post.md
   ├── photo1.jpg
   └── photo2.png
   ```

2. **在文章中使用相對路徑**：
   ```markdown
   ![圖片說明](./photo1.jpg)
   ![另一張圖](./photo2.png)
   ```

3. **執行自動處理腳本**：
   ```bash
   npm run images:process
   ```
   
   這個腳本會自動：
   - ✅ 轉換圖片為 WebP 格式
   - ✅ 壓縮圖片（節省空間）
   - ✅ 上傳到 R2
   - ✅ 替換文章中的路徑為 CDN URL
   - ✅ 清理本地圖片（處理完成後）

**詳細說明請參考 `圖片上傳指南.md`**

> **注意**：`.env` 文件已加入 `.gitignore`，不會被提交到 Git，保護你的敏感資訊。

### 3. 本地預覽

```bash
npm run dev
```

訪問 http://localhost:3000 查看效果

### 4. 構建測試

```bash
npm run build
```

確認沒有錯誤後，可以部署

### 5. 部署

推送到 GitHub，Vercel/Zeabur 會自動構建並部署

## 📂 檔案結構說明

```
content/                # 所有文章存放的地方
├── 2024/
│   ├── 02/
│   │   └── 文章標題.md
│   └── 09/
│       └── 文章標題.md
└── 2025/
    └── 11/
        └── 文章標題.md
```

**工作流程**：
```
撰寫 → content/2025/11/新文章.md
  ↓
渲染 → Next.js 從 content/ 讀取並顯示
```

## 🎯 最佳實踐

1. **文章命名**：
   - 使用有意義的中文或英文檔名
   - 避免特殊字符和空格（可用連字號 `-` 或底線 `_`）
   - 檔名會自動成為 URL slug

2. **圖片管理**：
   - 使用 `npm run images:process` 自動處理圖片
   - 腳本會自動轉換為 WebP 格式並壓縮
   - 圖片會上傳到 R2，路徑格式：`https://img.waynspace.com/YYYY/MM/slug/image.webp`
   - 處理完成後，本地圖片會被自動刪除

3. **日期管理**：
   - 保持 front matter 中的 `date` 與資料夾結構一致
   - 如果需要調整發佈日期，修改 `date` 欄位並移動檔案到對應目錄

4. **版本控制**：
   - 只提交 `content/` 下的 `.md` 檔案到 Git
   - 不要提交圖片檔案（圖片存放在 R2）

## ❓ 常見問題

### Q: 文章沒有出現在網站上？

A: 
- 確認檔案路徑正確：`content/YYYY/MM/文章標題.md`
- 確認 front matter 格式正確
- 重新啟動開發伺服器：`npm run dev`

### Q: 圖片顯示不出來？

A: 
1. 檢查圖片是否已經上傳到 R2
2. 檢查圖片 URL 是否正確（完整 URL：`https://img.waynspace.com/YYYY/MM/slug/image.webp`）
3. 確認 R2 圖床的公開訪問設定
4. 確認 Cloudflare R2 已啟用 Public Access

### Q: 如何修改已發佈的文章？

A: 直接編輯 `content/` 下的 `.md` 檔案，然後重新構建或部署

### Q: 文章的日期格式錯誤怎麼辦？

A: 修改 front matter 中的 `date` 欄位，並將檔案移動到對應的年份/月份資料夾

### Q: 在哪裡設定 R2 參數？

A: 
1. **推薦**：創建 `.env` 文件（複製 `.env.example`），填入你的 R2 配置
2. **或者**：在執行命令時使用環境變數
3. 詳細說明請參考「上傳圖片到 R2」章節

## 📚 相關資源

- [Markdown 語法指南](https://www.markdownguide.org/)
- [Next.js 文檔](https://nextjs.org/docs)
- 詳細技術說明請參考 `Wayn-Hexo-Next-R2-Dev-Guide.md`
- 圖片處理說明請參考 `如何撰寫文章.md`

---

**記住**：直接在 `content/` 目錄下編輯 `.md` 檔案即可！
