# 目錄結構說明

本文件說明專案的目錄結構和組織方式。

**作者：** Wei-Ting Liu

---

## 📁 content/ 目錄

**這是你要編輯文章的地方！**

- **用途**：存放所有文章檔案（`.md` 格式）
- **位置**：`content/YYYY/MM/文章標題.md`
- **結構**：按年份和月份組織
- **編輯**：你應該在這裡創建和編輯文章

**範例**：
```
content/
├── 2025/
│   ├── 11/
│   │   ├── 大一下第六週回顧.md
│   │   ├── 新文章.md
│   │   └── my-article/
│   │       ├── my-article.md
│   │       ├── photo1.jpg      # 圖片放在同目錄下
│   │       └── photo2.png
│   └── 10/
│       └── 舊文章.md
└── 2024/
    └── 09/
        └── 舊文章.md
```

## 🔄 工作流程

```
1. 撰寫文章
   ↓
   在 content/2025/11/ 創建 新文章.md
   將圖片放在文章同目錄下
   
2. 處理圖片（可選）
   ↓
   執行 npm run images:process
   自動上傳圖片到 R2 並更新路徑
   
3. Next.js 渲染
   ↓
   從 content/ 讀取 .md 檔案並渲染到網站
```

## 📝 文章命名規則

- **檔案名稱會自動成為 URL slug**
- **範例**：`content/2025/11/my-new-post.md` → URL: `/blog/2025/11/my-new-post`
- **檔名中的空格會自動替換為連字號**
  - 例如：`空間探索 20251130.md` → URL: `/blog/2025/12/空間探索-20251130`
- **建議**：
  - ✅ 使用有意義的檔名
  - ✅ 避免特殊字符（除了空格和連字號）
  - ✅ 可以使用中文檔名

## 🖼️ 圖片存放

**推薦方式**：將圖片放在文章同目錄下，使用相對路徑，然後執行自動處理腳本。

**目錄結構範例**：
```
content/2025/11/my-article/
├── my-article.md
├── cover.jpg          # 圖片放在同目錄下
├── photo1.jpg
└── photo2.png
```

**在文章中使用相對路徑**：
```markdown
![封面](./cover.jpg)
![照片1](./photo1.jpg)
![照片2](./photo2.png)
```

**執行自動處理**：
```bash
npm run images:process
```

**結果**：
- ✅ 圖片自動上傳到 R2：`blog-post/2025/11/my-article/cover.webp`
- ✅ 路徑自動更新為 CDN URL：`https://img.waynspace.com/2025/11/my-article/cover.webp`
- ✅ 本地圖片自動刪除

**R2 路徑結構**：
- **R2 路徑**：`blog-post/YYYY/MM/slug/image.webp`
- **公開 URL**：`https://img.waynspace.com/YYYY/MM/slug/image.webp`

**詳細說明請參考**：
- `docs/如何撰寫文章.md` - 文章撰寫指南
- `docs/圖片上傳指南.md` - 圖片上傳詳細說明
- `scripts/README.md` - 腳本使用說明

## 📚 其他重要目錄

### `src/` 目錄
- **用途**：Next.js 應用程式代碼
- **包含**：頁面、組件、工具函數等
- **注意**：一般不需要修改，除非要調整網站功能

### `scripts/` 目錄
- **用途**：存放各種自動化腳本
- **主要腳本**：
  - `process-local-images.mjs` - 自動處理圖片（推薦）
  - `verify-r2-images.mjs` - 驗證圖片路徑
  - `delete-r2-images.mjs` - 刪除包含空格的文件
- **詳細說明**：請參考 `scripts/README.md`

### `docs/` 目錄
- **用途**：存放文檔和指南
- **包含**：
  - `如何撰寫文章.md` - 文章撰寫指南
  - `圖片上傳指南.md` - 圖片上傳說明
  - `經營.md` - 博客經營指南
  - `目錄說明.md` - 本文件

### `public/` 目錄
- **用途**：存放靜態資源（如 favicon、PDF 等）
- **注意**：圖片應該上傳到 R2，而不是放在這裡

---

## ✅ 總結

- **content/**：✅ 你要編輯的地方
- **工作流程**：在 content 寫文章 → 處理圖片 → Next.js 直接讀取並渲染
- **圖片管理**：使用 `npm run images:process` 自動處理
- **詳細指南**：請參考 `docs/` 目錄下的文檔
